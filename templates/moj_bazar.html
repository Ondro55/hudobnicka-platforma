{% extends 'base.html' %}
{% block title %}Pridať inzerát{% endblock %}

{% block content %}
<section class="pridaj-inzerat">
  <h2>📝 Pridaj nový inzerát</h2>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <ul class="flash-messages">
        {% for category, message in messages %}
          <li class="flash {{ category }}">{{ message }}</li>
        {% endfor %}
      </ul>
    {% endif %}
  {% endwith %}

  <!-- 🔁 TOTO JE DÔLEŽITÉ -->
  <div class="form-wrapper" style="display: flex; gap: 2rem; align-items: flex-start;">

    <form action="" method="post" enctype="multipart/form-data" class="inzerat-form" style="flex: 1;">
      <!-- ĽAVÁ STRANA -->
      <label>Typ inzerátu</label>
      <select name="typ" required>
        <option value="" disabled selected>Vyber typ</option>
        <option value="Predám">Predám</option>
        <option value="Kúpim">Kúpim</option>
        <option value="Darujem">Darujem</option>
        <option value="Vymením">Vymením</option>
        <option value="Hľadám">Hľadám</option>
      </select>

      <label>Kategória</label>
      <select name="kategoria" required>
        <option value="" disabled selected>Vyber kategóriu</option>
        <!-- tvoje kategórie -->
      </select>

      <label for="mesto">Mesto</label>
      <select id="mesto" name="mesto_id" required>
        <option value="">-- Vyber mesto --</option>
        {% for mesto in mesta %}
          <option value="{{ mesto.id }}">{{ mesto.nazov }}</option>
        {% endfor %}
      </select>

      <label>Doprava</label>
      <select name="doprava">
        <option value="Osobne">Osobne</option>
        <option value="Poštou">Poštou</option>
        <option value="Kuriér">Kuriér</option>
      </select>

      <label>Cena (€)</label>
      <input type="number" step="0.01" name="cena">

      <label>Popis</label>
      <textarea name="popis" rows="5"></textarea>

      <button type="submit">💾 Pridať inzerát</button>
    </form>

    <!-- PRAVÁ STRANA - fotky -->
    <div class="fotky" style="flex: 1;">
      <h3>📸 Fotky k inzerátu</h3>
      <input type="file" name="fotky" accept="image/*" multiple>
      <p style="font-size: 0.9rem;">Max. 5 fotiek. Formát JPG, PNG.</p>
    </div>
  </div>
</section>

<hr>

<h2>Moje aktívne inzeráty</h2>

{% if inzeraty %}
  <div class="zoznam-inzeratov">
    {% for inzerat in inzeraty %}
      <div class="inzerat-box">
        <div class="inzerat-header">
          {{ inzerat.typ }} – {{ inzerat.kategoria }}
        </div>
        <p>{{ inzerat.popis }}</p>
        <p>📍 {{ inzerat.mesto.nazov }} | 💶 {{ inzerat.cena }} €</p>
        <small>🕒 Pridané: {{ inzerat.datum.strftime('%d.%m.%Y') }}</small>

        <div class="inzerat-akcie">
          <a href="{{ url_for('inzerat.uprav_inzerat', inzerat_id=inzerat.id) }}">✏️ Upraviť</a>
          <a href="{{ url_for('inzerat.zmaz_inzerat', inzerat_id=inzerat.id) }}" onclick="return confirm('Naozaj chceš zmazať tento inzerát?')">🗑️ Zmazať</a>
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p>Nemáš zatiaľ žiadne inzeráty.</p>
{% endif %}



{% endblock %}
