{% extends 'base.html' %}
{% block title %}PridaÅ¥ inzerÃ¡t{% endblock %}

{% block content %}
<section class="pridaj-inzerat">
  <h2>ğŸ“ Pridaj novÃ½ inzerÃ¡t</h2>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <ul class="flash-messages">
        {% for category, message in messages %}
          <li class="flash {{ category }}">{{ message }}</li>
        {% endfor %}
      </ul>
    {% endif %}
  {% endwith %}

  <!-- ğŸ” TOTO JE DÃ”LEÅ½ITÃ‰ -->
  <div class="form-wrapper" style="display: flex; gap: 2rem; align-items: flex-start;">

    <form action="" method="post" enctype="multipart/form-data" class="inzerat-form" style="flex: 1;">
      <!-- Ä½AVÃ STRANA -->
      <label>Typ inzerÃ¡tu</label>
      <select name="typ" required>
        <option value="" disabled selected>Vyber typ</option>
        <option value="PredÃ¡m">PredÃ¡m</option>
        <option value="KÃºpim">KÃºpim</option>
        <option value="Darujem">Darujem</option>
        <option value="VymenÃ­m">VymenÃ­m</option>
        <option value="HÄ¾adÃ¡m">HÄ¾adÃ¡m</option>
      </select>

      <label>KategÃ³ria</label>
      <select name="kategoria" required>
        <option value="" disabled selected>Vyber kategÃ³riu</option>
        <!-- tvoje kategÃ³rie -->
      </select>

      <label for="mesto">Mesto</label>
      <select id="mesto" name="mesto_id" required>
        <option value="">-- Vyber mesto --</option>
        {% for mesto in mesta %}
          <option value="{{ mesto.id }}">{{ mesto.nazov }}</option>
        {% endfor %}
      </select>

      <label>Doprava</label>
      <select name="doprava">
        <option value="Osobne">Osobne</option>
        <option value="PoÅ¡tou">PoÅ¡tou</option>
        <option value="KuriÃ©r">KuriÃ©r</option>
      </select>

      <label>Cena (â‚¬)</label>
      <input type="number" step="0.01" name="cena">

      <label>Popis</label>
      <textarea name="popis" rows="5"></textarea>

      <button type="submit">ğŸ’¾ PridaÅ¥ inzerÃ¡t</button>
    </form>

    <!-- PRAVÃ STRANA - fotky -->
    <div class="fotky" style="flex: 1;">
      <h3>ğŸ“¸ Fotky k inzerÃ¡tu</h3>
      <input type="file" name="fotky" accept="image/*" multiple>
      <p style="font-size: 0.9rem;">Max. 5 fotiek. FormÃ¡t JPG, PNG.</p>
    </div>
  </div>
</section>

<hr>

<h2>Moje aktÃ­vne inzerÃ¡ty</h2>

{% if inzeraty %}
  <div class="zoznam-inzeratov">
    {% for inzerat in inzeraty %}
      <div class="inzerat-box">
        <div class="inzerat-header">
          {{ inzerat.typ }} â€“ {{ inzerat.kategoria }}
        </div>
        <p>{{ inzerat.popis }}</p>
        <p>ğŸ“ {{ inzerat.mesto.nazov }} | ğŸ’¶ {{ inzerat.cena }} â‚¬</p>
        <small>ğŸ•’ PridanÃ©: {{ inzerat.datum.strftime('%d.%m.%Y') }}</small>

        <div class="inzerat-akcie">
          <a href="{{ url_for('inzerat.uprav_inzerat', inzerat_id=inzerat.id) }}">âœï¸ UpraviÅ¥</a>
          <a href="{{ url_for('inzerat.zmaz_inzerat', inzerat_id=inzerat.id) }}" onclick="return confirm('Naozaj chceÅ¡ zmazaÅ¥ tento inzerÃ¡t?')">ğŸ—‘ï¸ ZmazaÅ¥</a>
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p>NemÃ¡Å¡ zatiaÄ¾ Å¾iadne inzerÃ¡ty.</p>
{% endif %}



{% endblock %}
