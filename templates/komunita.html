{% extends 'base.html' %}
{% block title %}Komunita hudobnÃ­kov | Muzikuj{% endblock %}

{% block content %}
<section class="komunita-wrapper" style="padding: 2rem;">
  <h2 style="margin-bottom: 1rem;">ğŸµ Komunita hudobnÃ­kov</h2>

  <!-- ğŸ” VyhÄ¾adÃ¡vacÃ­ formulÃ¡r -->
  <form method="GET" action="{{ url_for('komunita.komunita') }}" style="display: flex; gap: 1rem; margin-bottom: 2rem;">
    <input type="text" name="hladaj_meno" placeholder="HÄ¾adaj podÄ¾a mena..." value="{{ request.args.get('hladaj_meno', '') }}" style="flex: 1; padding: 0.5rem;">
    
    <select name="nastroj" style="padding: 0.5rem;">
      <option value="">ğŸ¸ VÅ¡etky nÃ¡stroje</option>
      <option value="gitara" {% if request.args.get('nastroj') == 'gitara' %}selected{% endif %}>Gitara</option>
      <option value="klavesy" {% if request.args.get('nastroj') == 'klavesy' %}selected{% endif %}>KlavÃ­r / KlÃ¡vesy</option>
      <option value="bicie" {% if request.args.get('nastroj') == 'bicie' %}selected{% endif %}>Bicie</option>
      <option value="dychovÃ©" {% if request.args.get('nastroj') == 'dychovÃ©' %}selected{% endif %}>DychovÃ©</option>
      <option value="slÃ¡ÄikovÃ©" {% if request.args.get('nastroj') == 'slÃ¡ÄikovÃ©' %}selected{% endif %}>SlÃ¡ÄikovÃ©</option>
      <option value="inÃ©" {% if request.args.get('nastroj') == 'inÃ©' %}selected{% endif %}>InÃ©</option>
    </select>

    <button type="submit" style="padding: 0.5rem 1rem;">ğŸ” HÄ¾adaj</button>
  </form>

  <!-- ğŸ‘¥ Zoznam pouÅ¾Ã­vateÄ¾ov -->
  <div class="komunita-list" style="max-height: 70vh; overflow-y: auto;">
    {% for uzivatel in uzivatelia %}
      <div class="komunita-box">
            <div class="kom-nickname">{{ uzivatel.prezyvka }}</div>

            <div>
                {% if uzivatel.profil_fotka %}
                <img src="{{ url_for('static', filename='profilovky/' ~ uzivatel.profil_fotka) }}" alt="ProfilovÃ¡ fotka" class="kom-fotka">
                {% else %}
                <img src="{{ url_for('static', filename='default.png') }}" alt="Bez fotky" class="kom-fotka">
                {% endif %}
            </div>

            <div class="kom-skupina">
                {% if uzivatel.skupiny %}
                    {{ uzivatel.skupiny }}
                {% else %}
                    âŒ Å½iadna
                {% endif %}
            </div>

            <div class="kom-nastroj">{{ uzivatel.instrument }}</div>
        </div>
    {% else %}
      <p>ğŸ˜¢ NenaÅ¡li sa Å¾iadni hudobnÃ­ci podÄ¾a tvojho filtra.</p>
    {% endfor %}
  </div>
</section>
{% endblock %}
